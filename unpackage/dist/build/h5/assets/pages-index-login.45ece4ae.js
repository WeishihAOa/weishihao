import{v as e,x as a,y as s,z as l,o,a as r,w as t,g as i,d as n,f as u,A as m,B as d,C as f,r as p,D as c}from"./index-135674de.js";import{_ as g,a as _}from"./uni-forms-item.c9dacb70.js";import{r as y}from"./uni-app.es.cf32430c.js";import{_ as h,a as x}from"./logo.5410bc3a.js";import{_ as V}from"./_plugin-vue_export-helper.1b428a4d.js";const k=V({__name:"login",setup(V){const k=a(),v=s(null),w=l({email:"",password:""}),j={email:{rules:[{required:!0,errorMessage:"必填项"},{format:"email",errorMessage:"邮件格式错误"}]}},z=()=>{v.value.validate().then((a=>{var s,l;(s="api/mobile/elogin",l=w,e({url:s,method:"POST",data:l})).then((e=>{if(console.log(e),e.success){const a=e.data.userinfo;k.setToken(a.token),console.log(a.token),k.fillUser(a),m({url:"/pages/index/index"})}})).catch((e=>{console.log(e)}))})).catch((e=>{console.log(e)}))};function C(){d({url:"/pages/index/register",success(e){console.log(e)},fail(e){console.log(e)}})}return(e,a)=>{const s=f,l=i,m=y(p("uni-easyinput"),g),d=y(p("uni-forms-item"),_),V=c,k=y(p("uni-forms"),x);return o(),r(l,null,{default:t((()=>[n(l,{class:"logo"},{default:t((()=>[n(s,{src:h})])),_:1}),n(k,{class:"myForm",ref_key:"myForm",ref:v,modelValue:w,rules:j},{default:t((()=>[n(d,{name:"email"},{default:t((()=>[n(m,{class:"input",modelValue:w.email,"onUpdate:modelValue":a[0]||(a[0]=e=>w.email=e),placeholder:"请输入电子邮箱","suffix-icon":"email"},null,8,["modelValue"])])),_:1}),n(d,{name:"password"},{default:t((()=>[n(m,{class:"input",type:"password",modelValue:w.password,"onUpdate:modelValue":a[1]||(a[1]=e=>w.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),n(V,{type:"primary",onClick:z},{default:t((()=>[u("用户登录")])),_:1}),n(l,{class:"logo-extra"},{default:t((()=>[n(V,{type:"default",size:"mini"},{default:t((()=>[u("忘记密码")])),_:1}),n(V,{type:"default",size:"mini",onClick:C},{default:t((()=>[u("用户注册")])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}},[["__scopeId","data-v-32f72e16"]]);export{k as default};
